---
title: "p8105_hw1_sdc2157"
author: "Stephanie Calluori"
date: 2023-10-04
output: github_document
---

```{r, load_packages, message = FALSE}
library(tidyverse)
library(readxl)
```

# Importing Data
```{r, import_data, results = "hide", message = FALSE}
pols_month_raw <- 
  read_csv("data/pols-month.csv")
head(pols_month_raw)
sum(is.na(pols_month_raw))

snp_raw <-
  read_csv("data/snp.csv")
head(snp_raw)
sum(is.na(snp_raw))

unemployment_raw <-
  read_csv("data/unemployment.csv")
head(unemployment_raw)
sum(is.na(unemployment_raw))

mr_trash_raw <-
  read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = 1, range = "A2:N549")
head(mr_trash_raw)

prof_trash_raw <-
  read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = 2, range = "A2:M96")
head(prof_trash_raw)

gwyn_trash_raw <-
  read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = 4, range = "A2:K108")
head(gwyn_trash_raw)

mci_amyloid_raw <-
  read_csv("data/mci_amyloid.csv")
head(mci_amyloid_raw)

mci_baseline_raw <- 
  read_csv("data/MCI_baseline.csv")
head(mci_baseline_raw)

```

# Problem 1 - Under REVISION

```{r, pols data exploration, include = FALSE}
pols_month_raw |>
  count(prez_gop)

pols_month_raw |>
  count(prez_dem)
```

```{r, pols cleaning}
month_df = 
  tibble(
    month_num = 1:12,
    month = c("jan", "feb", "mar", "apr", "may", "june", "july", "aug", "sept", "oct", "nov", "dec")
  )

pols_month_df <- pols_month_raw |>
  janitor::clean_names() |> 
  separate(mon, c("year", "month_num", "day"), "-", convert = TRUE) |> 
  mutate(prez = recode(
      prez_dem, 
      "0" = "gop", 
      "1" = "dem")) |> 
  left_join(x = _, y = month_df, by = "month_num") |> 
  select(year, month, everything(), -month_num, -day, -prez_gop, -prez_dem)

head(pols_month_df)

```


```{r, snp cleaning}
snp_df <- snp_raw |>
  janitor::clean_names() |> 
  mutate(date = lubridate::mdy(date)) |> 
  separate(date, c("year", "month_num", "day"), "-", convert = TRUE) |> 
  left_join(x = _, y = month_df, by = "month_num") |> 
  select(year, month, close, -month_num, -day)

head(snp_df)

```


```{r, unemployment cleaning}
unemployment_df <- unemployment_raw |> 
  janitor::clean_names() |> 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "percent_unemployed"
  )

head(unemployment_df)
```


```{r, merge 538 datasets, include = FALSE}
fivethirtyeight_df <- 
  left_join(pols_month_df, snp_df, by = c("year", "month")) |> 
  left_join(x = _, y = unemployment_df, by = c("year", "month"))
  
head(fivethirtyeight_df)
```


# Problem 2

```{r, mr_trash_cleaning}
mr_trash_df <- mr_trash_raw |> 
  janitor::clean_names() |> 
  rename(volume_cubic_yds = volume_cubic_yards, homes_powered_old = homes_powered) |> 
  mutate(wheel = "mr_trash",
         homes_powered = weight_tons*500/30) |> 
  pivot_longer(
    plastic_bottles:sports_balls,
    names_to = "trash_type",
    values_to = "amount_collected") |> 
  select(wheel, everything(), -homes_powered_old)

  
head(mr_trash_df)

```


```{r, prof_trash_cleaning}
prof_trash_df <- prof_trash_raw |> 
  janitor::clean_names() |> 
  rename(volume_cubic_yds = volume_cubic_yards, homes_powered_old = homes_powered) |> 
  mutate(wheel = "prof_trash",
         homes_powered = weight_tons*500/30) |> 
  pivot_longer(
    plastic_bottles:chip_bags,
    names_to = "trash_type",
    values_to = "amount_collected") |> 
  select(wheel, everything(), -homes_powered_old)

  
```


```{r, gwyn_trash_cleaning}
gwyn_trash_df <- gwyn_trash_raw |> 
  janitor::clean_names() |> 
  rename(volume_cubic_yds = volume_cubic_yards, homes_powered_old = homes_powered) |> 
  mutate(wheel = "gwynnda_trash",
         homes_powered = weight_tons*500/30) |> 
  pivot_longer(
    plastic_bottles:plastic_bags,
    names_to = "trash_type",
    values_to = "amount_collected") |> 
  select(wheel, everything(), -homes_powered_old)

  
head(gwyn_trash_df)

```

```{r, combine trash datasets}
trash_wheels_df <- rbind(mr_trash_df, prof_trash_df, gwyn_trash_df)

view(trash_wheels_df)
```


```{r}
gywn_cig <-
  trash_wheels_df |> 
  filter(wheel == "gwynnda_trash" & month == "July" & year == "2021" & trash_type == "cigarette_butts") |>
  summarize(total_cigs = sum(amount_collected))

```

Write a paragraph about these data; you are encouraged to use inline R. Be sure to note the number of observations in the resulting dataset, and give examples of key variables. For available data, what was the total weight of trash collected by Professor Trash Wheel? What was the total number of cigarette butts collected by Gwynnda in July of 2021?


